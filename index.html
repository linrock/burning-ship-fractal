<!doctype html>
<html lang="en">
<head>
  <title>Burning ship fractal</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Space+Grotesk&display=swap" rel="stylesheet">
</head>

<body>
  <header>
    <h1>Burning ship fractal</h1>
    <canvas id="bsf-wide" width="4000"
                          height="1000"></canvas>
    <div class="container">
      <figcaption>
         x [-2.00, -1.5] <br>
        y [-0.09,  0.02]
      </figcaption>
    </div>
  </header>

  <div class="container">
    <p>Images are generated by analyzing points on the complex plane:</p>
    <pre>Z_n+1 = (|Z_re| + i|Z_im|)^2 + (x0, y0)</pre>

    <section>
      <p>
        We can explore fractals by putting different starting (x0, y0) numbers
        into the equation and making note of whether the series:
        <ul>
          <li>diverges to infinity or stays within a limit</li>
          <li>if the series diverges, we can look at:
            <ul>
              <li>the number of iterations until reaching the escape radius</li>
              <li>the magnitude of the escape</li>
            </ul>
          </li>
        </ul>
      </p>
    </section>

    <p>
      Here's the largest ship in the fractal, colored based on
      iteration count alone.
    </p>
    <canvas id="bsf-large-ship-1" width="1600" height="1600"></canvas>
    <figcaption>
      x [-1.80, -1.7] <br>
      y [-0.08,  0.01]
    </figcaption>

    <p>
      If we consider the magnitude of the escape, the resulting
      image will appear smoother with the same color palette.
      Here's the largest ship colored with renormalized
      iteration counts.
    </p>
    <canvas id="bsf-large-ship-2" width="1600" height="1600"></canvas>
    <figcaption>
      x [-1.8, -1.7] <br>
      y [-0.08, 0.01]
    </figcaption>

    <div style="display: none">
      <input id="x_range_0" type="text" value="-1.8" />
      <input id="x_range_1" type="text" value="-1.7" />

      <input id="y_range_0" type="text" value="-0.08" />
      <input id="y_range_1" type="text" value="0.01" />

      <button id="update">Update</button>
    </div>

    <p>The zoomed-out view of the fractal space</p>
    <canvas id="bsf-world-overview" width="800"
                                    height="600"></canvas>
    <figcaption>
      x [-2.5, 1.5] <br>
      y [-2,   1.0]
    </figcaption>

    <p>Zoomed in to one of the smaller ships</p>
    <canvas id="bsf-small-ship-1" width="400"
                                  height="600"></canvas>
    <figcaption>
      x [-1.5805, -1.563] <br>
      y [-0.0405, 0.0057]
    </figcaption>

    <p>Another one of the smaller ships</p>
    <canvas id="bsf-small-ship-2" width="400"
                                  height="300"></canvas>
    <figcaption>
      x [-1.948, -1.925] <br>
      y [-0.0095,  0.002]
    </figcaption>

    <p>The number of iterations is determined by this equation:</p>
    <pre>
const ESCAPE_THRESHOLD = 4;
const MAX_ITERATIONS = 255;

function iterateUntilEscape(x0, y0) {
  let x = 0;
  let y = 0;
  let iteration = 0;
  while ((x*x + y*y < ESCAPE_THRESHOLD) &&
         (iteration &lt; MAX_ITERATIONS)) {
    const x_next = x*x - y*y + x0;
    const y_next = 2*Math.abs(x*y) + y0;
    x = x_next;
    y = y_next;
    iteration++;
  }
  return [iteration, x*x + y*y];
}</pre>
  </div>

  <section>
    <div class="container">
      <h3>About</h3>
      <p>
        All fractals on the page are interactive and rendered when
        they're in view.
      </p>

      <p>TODO</p>
      <ul>
        <li>Maybe show the (x0, y0) center of each canvas</li>
        <li>Enable dragging on a canvas to pan the camera view</li>
        <li>Draw boxes when selecting parts of the canvas to zoom in on</li>
        <li>Enable undo-ing the last camera action</li>
      </ul>
    </div>
  </section>

  <footer>
    <div class="container">
      <h2>References</h2>
      <ul>
        <li><a href="https://en.wikipedia.org/wiki/Burning_Ship_fractal">Wikipedia - Burning ship fractal</a></li>
      </ul>
    </div>
  </footer>

  <script src="main.js"></script>
</body>
</html>
